## 搜索引擎

Reactor: IO线程

线程池:   计算线程 

计算线程要通知IO线程发送数据



网络编程过程中涉及到三个半事件

- 当新连接到来时,  onConnection 
- 当消息到达时,    onMessage
- 当连接关闭时,    onClose



#### 程序的运行步骤

1. 初始化配置类，读取网页库、倒排索引，启动线程池。
2. 通过配置对象，获取ip地址和端口号，启动TCP服务器，循环监听并接受客户端发来的查询请求。此监听线程为**IO线程**，负责与客户端的通信。
3. 只要一有请求，就根据请求创建一个任务对象Task，同时线程池把该任务放到任务队列中去，交给一个**计算线程**进行处理。
4. 当**计算线程**处理完任务后，会将返回结果封装成一个Json数据，并将该数据交给**IO线程**来发送给客户端。

#### 计算线程工作流程

1. 初始化自己的内存cache对象。
2. 循环不停地去任务队列里取任务 。
3. 执行任务。
4. 调用成员函数doQuery()获得查询结果。在doQuery()中，先检查客户端发来的请求是否在cache中，如果在则直接从cache中把结果返回。如果不在chache中，根据先前建立的索引进行查询。
5. 当执行完查询之后，将结果返回给客户端，同时存储到cache中去。

#### 100G的xml文件(就是想表达内存存不下)，只允许使用单台服务器，不允许出现停机更新的情况，同时要做到搜索结果的实时性，我的项目要怎么改进

## 项目的完整流程以及详细实现